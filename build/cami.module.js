var Qe=Object.defineProperty;var be=Object.getOwnPropertySymbols;var et=Object.prototype.hasOwnProperty;var tt=Object.prototype.propertyIsEnumerable;var ve=(t,e)=>{if(e=Symbol[t])return e;throw Error("Symbol."+t+" is not defined")};var ge=(t,e,r)=>e in t?Qe(t,e,{enumerable:true,configurable:true,writable:true,value:r}):t[e]=r;var Ae=(t,e)=>{for(var r in e||(e={}))if(et.call(e,r))ge(t,r,e[r]);if(be)for(var r of be(e)){if(tt.call(e,r))ge(t,r,e[r])}return t};var we=(t,e,r)=>{return new Promise((s,n)=>{var i=a=>{try{c(r.next(a))}catch(u){n(u)}};var o=a=>{try{c(r.throw(a))}catch(u){n(u)}};var c=a=>a.done?s(a.value):Promise.resolve(a.value).then(i,o);c((r=r.apply(t,e)).next())})};var $e=(t,e,r)=>(e=t[ve("asyncIterator")])?e.call(t):(t=t[ve("iterator")](),e={},r=(s,n)=>(n=t[s])&&(e[s]=i=>new Promise((o,c,a)=>(i=n.call(t,i),a=i.done,Promise.resolve(i.value).then(u=>o({value:u,done:a}),c)))),r("next"),r("return"),e);var T=globalThis;var L=T.trustedTypes;var xe=L?L.createPolicy("lit-html",{createHTML:t=>t}):void 0;var De="$lit$";var v=`lit$${(Math.random()+"").slice(9)}$`;var ze="?"+v;var rt=`<${ze}>`;var w=document;var M=()=>w.createComment("");var I=t=>null===t||"object"!=typeof t&&"function"!=typeof t;var Te=Array.isArray;var st=t=>Te(t)||"function"==typeof(t==null?void 0:t[Symbol.iterator]);var Q="[ 	\n\f\r]";var z=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g;var Ee=/-->/g;var Se=/>/g;var g=RegExp(`>|${Q}(?:([^\\s"'>=/]+)(${Q}*=${Q}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g");var Ce=/'/g;var Pe=/"/g;var Me=/^(?:script|style|textarea|title)$/i;var Ie=t=>(e,...r)=>({_$litType$:t,strings:e,values:r});var nt=Ie(1);var bt=Ie(2);var H=Symbol.for("lit-noChange");var f=Symbol.for("lit-nothing");var Oe=new WeakMap;var A=w.createTreeWalker(w,129);function He(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==xe?xe.createHTML(e):e}var it=(t,e)=>{const r=t.length-1,s=[];let n,i=2===e?"<svg>":"",o=z;for(let c=0;c<r;c++){const a=t[c];let u,h,l=-1,y=0;for(;y<a.length&&(o.lastIndex=y,h=o.exec(a),null!==h);)y=o.lastIndex,o===z?"!--"===h[1]?o=Ee:void 0!==h[1]?o=Se:void 0!==h[2]?(Me.test(h[2])&&(n=RegExp("</"+h[2],"g")),o=g):void 0!==h[3]&&(o=g):o===g?">"===h[0]?(o=n!=null?n:z,l=-1):void 0===h[1]?l=-2:(l=o.lastIndex-h[2].length,u=h[1],o=void 0===h[3]?g:'"'===h[3]?Pe:Ce):o===Pe||o===Ce?o=g:o===Ee||o===Se?o=z:(o=g,n=void 0);const b=o===g&&t[c+1].startsWith("/>")?" ":"";i+=o===z?a+rt:l>=0?(s.push(u),a.slice(0,l)+De+a.slice(l)+v+b):a+v+(-2===l?c:b)}return[He(t,i+(t[r]||"<?>")+(2===e?"</svg>":"")),s]};var F=class t{constructor({strings:e,_$litType$:r},s){let n;this.parts=[];let i=0,o=0;const c=e.length-1,a=this.parts,[u,h]=it(e,r);if(this.el=t.createElement(u,s),A.currentNode=this.el.content,2===r){const l=this.el.content.firstChild;l.replaceWith(...l.childNodes)}for(;null!==(n=A.nextNode())&&a.length<c;){if(1===n.nodeType){if(n.hasAttributes())for(const l of n.getAttributeNames())if(l.endsWith(De)){const y=h[o++],b=n.getAttribute(l).split(v),V=/([.?@])?(.*)/.exec(y);a.push({type:1,index:i,name:V[2],strings:b,ctor:"."===V[1]?re:"?"===V[1]?se:"@"===V[1]?ne:P}),n.removeAttribute(l)}else l.startsWith(v)&&(a.push({type:6,index:i}),n.removeAttribute(l));if(Me.test(n.tagName)){const l=n.textContent.split(v),y=l.length-1;if(y>0){n.textContent=L?L.emptyScript:"";for(let b=0;b<y;b++)n.append(l[b],M()),A.nextNode(),a.push({type:2,index:++i});n.append(l[y],M())}}}else if(8===n.nodeType)if(n.data===ze)a.push({type:2,index:i});else{let l=-1;for(;-1!==(l=n.data.indexOf(v,l+1));)a.push({type:7,index:i}),l+=v.length-1}i++}}static createElement(e,r){const s=w.createElement("template");return s.innerHTML=e,s}};function C(t,e,r=t,s){var o,c,a;if(e===H)return e;let n=void 0!==s?(o=r._$Co)==null?void 0:o[s]:r._$Cl;const i=I(e)?void 0:e._$litDirective$;return(n==null?void 0:n.constructor)!==i&&((c=n==null?void 0:n._$AO)==null?void 0:c.call(n,false),void 0===i?n=void 0:(n=new i(t),n._$AT(t,r,s)),void 0!==s?((a=r._$Co)!=null?a:r._$Co=[])[s]=n:r._$Cl=n),void 0!==n&&(e=C(t,n._$AS(t,e.values),n,s)),e}var te=class{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var u;const{el:{content:r},parts:s}=this._$AD,n=((u=e==null?void 0:e.creationScope)!=null?u:w).importNode(r,true);A.currentNode=n;let i=A.nextNode(),o=0,c=0,a=s[0];for(;void 0!==a;){if(o===a.index){let h;2===a.type?h=new j(i,i.nextSibling,this,e):1===a.type?h=new a.ctor(i,a.name,a.strings,this,e):6===a.type&&(h=new ie(i,this,e)),this._$AV.push(h),a=s[++c]}o!==(a==null?void 0:a.index)&&(i=A.nextNode(),o++)}return A.currentNode=w,n}p(e){let r=0;for(const s of this._$AV)void 0!==s&&(void 0!==s.strings?(s._$AI(e,s,r),r+=s.strings.length-2):s._$AI(e[r])),r++}};var j=class t{get _$AU(){var e,r;return(r=(e=this._$AM)==null?void 0:e._$AU)!=null?r:this._$Cv}constructor(e,r,s,n){var i;this.type=2,this._$AH=f,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=s,this.options=n,this._$Cv=(i=n==null?void 0:n.isConnected)!=null?i:true}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return void 0!==r&&11===(e==null?void 0:e.nodeType)&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=C(this,e,r),I(e)?e===f||null==e||""===e?(this._$AH!==f&&this._$AR(),this._$AH=f):e!==this._$AH&&e!==H&&this._(e):void 0!==e._$litType$?this.g(e):void 0!==e.nodeType?this.$(e):st(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==f&&I(this._$AH)?this._$AA.nextSibling.data=e:this.$(w.createTextNode(e)),this._$AH=e}g(e){var i;const{values:r,_$litType$:s}=e,n="number"==typeof s?this._$AC(e):(void 0===s.el&&(s.el=F.createElement(He(s.h,s.h[0]),this.options)),s);if(((i=this._$AH)==null?void 0:i._$AD)===n)this._$AH.p(r);else{const o=new te(n,this),c=o.u(this.options);o.p(r),this.$(c),this._$AH=o}}_$AC(e){let r=Oe.get(e.strings);return void 0===r&&Oe.set(e.strings,r=new F(e)),r}T(e){Te(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let s,n=0;for(const i of e)n===r.length?r.push(s=new t(this.k(M()),this.k(M()),this,this.options)):s=r[n],s._$AI(i),n++;n<r.length&&(this._$AR(s&&s._$AB.nextSibling,n),r.length=n)}_$AR(e=this._$AA.nextSibling,r){var s;for((s=this._$AP)==null?void 0:s.call(this,false,true,r);e&&e!==this._$AB;){const n=e.nextSibling;e.remove(),e=n}}setConnected(e){var r;void 0===this._$AM&&(this._$Cv=e,(r=this._$AP)==null?void 0:r.call(this,e))}};var P=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,r,s,n,i){this.type=1,this._$AH=f,this._$AN=void 0,this.element=e,this.name=r,this._$AM=n,this.options=i,s.length>2||""!==s[0]||""!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=f}_$AI(e,r=this,s,n){const i=this.strings;let o=false;if(void 0===i)e=C(this,e,r,0),o=!I(e)||e!==this._$AH&&e!==H,o&&(this._$AH=e);else{const c=e;let a,u;for(e=i[0],a=0;a<i.length-1;a++)u=C(this,c[s+a],r,a),u===H&&(u=this._$AH[a]),o||(o=!I(u)||u!==this._$AH[a]),u===f?e=f:e!==f&&(e+=(u!=null?u:"")+i[a+1]),this._$AH[a]=u}o&&!n&&this.j(e)}j(e){e===f?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e!=null?e:"")}};var re=class extends P{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===f?void 0:e}};var se=class extends P{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==f)}};var ne=class extends P{constructor(e,r,s,n,i){super(e,r,s,n,i),this.type=5}_$AI(e,r=this){var o;if((e=(o=C(this,e,r,0))!=null?o:f)===H)return;const s=this._$AH,n=e===f&&s!==f||e.capture!==s.capture||e.once!==s.once||e.passive!==s.passive,i=e!==f&&(s===f||n);n&&this.element.removeEventListener(this.name,this,s),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r,s;"function"==typeof this._$AH?this._$AH.call((s=(r=this.options)==null?void 0:r.host)!=null?s:this.element,e):this._$AH.handleEvent(e)}};var ie=class{constructor(e,r,s){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(e){C(this,e)}};var ee=T.litHtmlPolyfillSupport;var Ne;ee==null?void 0:ee(F,j),((Ne=T.litHtmlVersions)!=null?Ne:T.litHtmlVersions=[]).push("3.0.0");var Fe=(t,e,r)=>{var i,o;const s=(i=r==null?void 0:r.renderBefore)!=null?i:e;let n=s._$litPart$;if(void 0===n){const c=(o=r==null?void 0:r.renderBefore)!=null?o:null;s._$litPart$=n=new j(e.insertBefore(M(),c),c,void 0,r!=null?r:{})}return n._$AI(t),n};var Be=Symbol.for("immer-nothing");var je=Symbol.for("immer-draftable");var p=Symbol.for("immer-state");var ot=true?[function(t){return`The plugin for '${t}' has not been loaded into Immer. To enable the plugin, import and call \`enable${t}()\` when initializing your application.`},function(t){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${t}'`},"This object has been frozen and should not be mutated",function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(t){return`'current' expects a draft, got: ${t}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(t){return`'original' expects a draft, got: ${t}`}]:[];function d(t,...e){if(true){const r=ot[t];const s=typeof r==="function"?r.apply(null,e):r;throw new Error(`[Immer] ${s}`)}throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var O=Object.getPrototypeOf;function N(t){return!!t&&!!t[p]}function x(t){var e;if(!t)return false;return Ve(t)||Array.isArray(t)||!!t[je]||!!((e=t.constructor)==null?void 0:e[je])||K(t)||J(t)}var at=Object.prototype.constructor.toString();function Ve(t){if(!t||typeof t!=="object")return false;const e=O(t);if(e===null){return true}const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(r===Object)return true;return typeof r=="function"&&Function.toString.call(r)===at}function U(t,e){if(G(t)===0){Object.entries(t).forEach(([r,s])=>{e(r,s,t)})}else{t.forEach((r,s)=>e(s,r,t))}}function G(t){const e=t[p];return e?e.type_:Array.isArray(t)?1:K(t)?2:J(t)?3:0}function ce(t,e){return G(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Le(t,e,r){const s=G(t);if(s===2)t.set(e,r);else if(s===3){t.add(r)}else t[e]=r}function ct(t,e){if(t===e){return t!==0||1/t===1/e}else{return t!==t&&e!==e}}function K(t){return t instanceof Map}function J(t){return t instanceof Set}function $(t){return t.copy_||t.base_}function ue(t,e){if(K(t)){return new Map(t)}if(J(t)){return new Set(t)}if(Array.isArray(t))return Array.prototype.slice.call(t);if(!e&&Ve(t)){if(!O(t)){const n=Object.create(null);return Object.assign(n,t)}return Ae({},t)}const r=Object.getOwnPropertyDescriptors(t);delete r[p];let s=Reflect.ownKeys(r);for(let n=0;n<s.length;n++){const i=s[n];const o=r[i];if(o.writable===false){o.writable=true;o.configurable=true}if(o.get||o.set)r[i]={configurable:true,writable:true,enumerable:o.enumerable,value:t[i]}}return Object.create(O(t),r)}function pe(t,e=false){if(Y(t)||N(t)||!x(t))return t;if(G(t)>1){t.set=t.add=t.clear=t.delete=ut}Object.freeze(t);if(e)U(t,(r,s)=>pe(s,true),true);return t}function ut(){d(2)}function Y(t){return Object.isFrozen(t)}var lt={};function E(t){const e=lt[t];if(!e){d(0,t)}return e}var k;function Xe(){return k}function ht(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:true,unfinalizedDrafts_:0}}function Ue(t,e){if(e){E("Patches");t.patches_=[];t.inversePatches_=[];t.patchListener_=e}}function le(t){he(t);t.drafts_.forEach(ft);t.drafts_=null}function he(t){if(t===k){k=t.parent_}}function ke(t){return k=ht(k,t)}function ft(t){const e=t[p];if(e.type_===0||e.type_===1)e.revoke_();else e.revoked_=true}function Re(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];const s=t!==void 0&&t!==r;if(s){if(r[p].modified_){le(e);d(4)}if(x(t)){t=X(e,t);if(!e.parent_)q(e,t)}if(e.patches_){E("Patches").generateReplacementPatches_(r[p].base_,t,e.patches_,e.inversePatches_)}}else{t=X(e,r,[])}le(e);if(e.patches_){e.patchListener_(e.patches_,e.inversePatches_)}return t!==Be?t:void 0}function X(t,e,r){if(Y(e))return e;const s=e[p];if(!s){U(e,(n,i)=>We(t,s,e,n,i,r),true);return e}if(s.scope_!==t)return e;if(!s.modified_){q(t,s.base_,true);return s.base_}if(!s.finalized_){s.finalized_=true;s.scope_.unfinalizedDrafts_--;const n=s.copy_;let i=n;let o=false;if(s.type_===3){i=new Set(n);n.clear();o=true}U(i,(c,a)=>We(t,s,n,c,a,r,o));q(t,n,false);if(r&&t.patches_){E("Patches").generatePatches_(s,r,t.patches_,t.inversePatches_)}}return s.copy_}function We(t,e,r,s,n,i,o){if(n===r)d(5);if(N(n)){const c=i&&e&&e.type_!==3&&!ce(e.assigned_,s)?i.concat(s):void 0;const a=X(t,n,c);Le(r,s,a);if(N(a)){t.canAutoFreeze_=false}else return}else if(o){r.add(n)}if(x(n)&&!Y(n)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1){return}X(t,n);if(!e||!e.scope_.parent_)q(t,n)}}function q(t,e,r=false){if(!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_){pe(e,r)}}function dt(t,e){const r=Array.isArray(t);const s={type_:r?1:0,scope_:e?e.scope_:Xe(),modified_:false,finalized_:false,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:false};let n=s;let i=_e;if(r){n=[s];i=R}const{revoke:o,proxy:c}=Proxy.revocable(n,i);s.draft_=c;s.revoke_=o;return c}var _e={get(t,e){if(e===p)return t;const r=$(t);if(!ce(r,e)){return pt(t,r,e)}const s=r[e];if(t.finalized_||!x(s)){return s}if(s===oe(t.base_,e)){ae(t);return t.copy_[e]=de(s,t)}return s},has(t,e){return e in $(t)},ownKeys(t){return Reflect.ownKeys($(t))},set(t,e,r){const s=qe($(t),e);if(s==null?void 0:s.set){s.set.call(t.draft_,r);return true}if(!t.modified_){const n=oe($(t),e);const i=n==null?void 0:n[p];if(i&&i.base_===r){t.copy_[e]=r;t.assigned_[e]=false;return true}if(ct(r,n)&&(r!==void 0||ce(t.base_,e)))return true;ae(t);fe(t)}if(t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e]))return true;t.copy_[e]=r;t.assigned_[e]=true;return true},deleteProperty(t,e){if(oe(t.base_,e)!==void 0||e in t.base_){t.assigned_[e]=false;ae(t);fe(t)}else{delete t.assigned_[e]}if(t.copy_){delete t.copy_[e]}return true},getOwnPropertyDescriptor(t,e){const r=$(t);const s=Reflect.getOwnPropertyDescriptor(r,e);if(!s)return s;return{writable:true,configurable:t.type_!==1||e!=="length",enumerable:s.enumerable,value:r[e]}},defineProperty(){d(11)},getPrototypeOf(t){return O(t.base_)},setPrototypeOf(){d(12)}};var R={};U(_e,(t,e)=>{R[t]=function(){arguments[0]=arguments[0][0];return e.apply(this,arguments)}});R.deleteProperty=function(t,e){if(isNaN(parseInt(e)))d(13);return R.set.call(this,t,e,void 0)};R.set=function(t,e,r){if(e!=="length"&&isNaN(parseInt(e)))d(14);return _e.set.call(this,t[0],e,r,t[0])};function oe(t,e){const r=t[p];const s=r?$(r):t;return s[e]}function pt(t,e,r){var n;const s=qe(e,r);return s?`value`in s?s.value:(n=s.get)==null?void 0:n.call(t.draft_):void 0}function qe(t,e){if(!(e in t))return void 0;let r=O(t);while(r){const s=Object.getOwnPropertyDescriptor(r,e);if(s)return s;r=O(r)}return void 0}function fe(t){if(!t.modified_){t.modified_=true;if(t.parent_){fe(t.parent_)}}}function ae(t){if(!t.copy_){t.copy_=ue(t.base_,t.scope_.immer_.useStrictShallowCopy_)}}var _t=class{constructor(t){this.autoFreeze_=true;this.useStrictShallowCopy_=false;this.produce=(e,r,s)=>{if(typeof e==="function"&&typeof r!=="function"){const i=r;r=e;const o=this;return function c(a=i,...u){return o.produce(a,h=>r.call(this,h,...u))}}if(typeof r!=="function")d(6);if(s!==void 0&&typeof s!=="function")d(7);let n;if(x(e)){const i=ke(this);const o=de(e,void 0);let c=true;try{n=r(o);c=false}finally{if(c)le(i);else he(i)}Ue(i,s);return Re(n,i)}else if(!e||typeof e!=="object"){n=r(e);if(n===void 0)n=e;if(n===Be)n=void 0;if(this.autoFreeze_)pe(n,true);if(s){const i=[];const o=[];E("Patches").generateReplacementPatches_(e,n,i,o);s(i,o)}return n}else d(1,e)};this.produceWithPatches=(e,r)=>{if(typeof e==="function"){return(o,...c)=>this.produceWithPatches(o,a=>e(a,...c))}let s,n;const i=this.produce(e,r,(o,c)=>{s=o;n=c});return[i,s,n]};if(typeof(t==null?void 0:t.autoFreeze)==="boolean")this.setAutoFreeze(t.autoFreeze);if(typeof(t==null?void 0:t.useStrictShallowCopy)==="boolean")this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){if(!x(t))d(8);if(N(t))t=mt(t);const e=ke(this);const r=de(t,void 0);r[p].isManual_=true;he(e);return r}finishDraft(t,e){const r=t&&t[p];if(!r||!r.isManual_)d(9);const{scope_:s}=r;Ue(s,e);return Re(void 0,s)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const n=e[r];if(n.path.length===0&&n.op==="replace"){t=n.value;break}}if(r>-1){e=e.slice(r+1)}const s=E("Patches").applyPatches_;if(N(t)){return s(t,e)}return this.produce(t,n=>s(n,e))}};function de(t,e){const r=K(t)?E("MapSet").proxyMap_(t,e):J(t)?E("MapSet").proxySet_(t,e):dt(t,e);const s=e?e.scope_:Xe();s.drafts_.push(r);return r}function mt(t){if(!N(t))d(10,t);return Ge(t)}function Ge(t){if(!x(t)||Y(t))return t;const e=t[p];let r;if(e){if(!e.modified_)return e.base_;e.finalized_=true;r=ue(t,e.scope_.immer_.useStrictShallowCopy_)}else{r=ue(t,true)}U(r,(s,n)=>{Le(r,s,Ge(n))});if(e){e.finalized_=false}return r}var _=new _t;var S=_.produce;var gt=_.produceWithPatches.bind(_);var At=_.setAutoFreeze.bind(_);var wt=_.setUseStrictShallowCopy.bind(_);var $t=_.applyPatches.bind(_);var xt=_.createDraft.bind(_);var Et=_.finishDraft.bind(_);var me=class{constructor(e){if(typeof e==="function"){this.observer={next:e}}else{this.observer=e}this.teardowns=[];if(typeof AbortController!=="undefined"){this.controller=new AbortController;this.signal=this.controller.signal}this.isUnsubscribed=false}next(e){if(!this.isUnsubscribed&&this.observer.next){this.observer.next(e)}}complete(){if(!this.isUnsubscribed){if(this.observer.complete){this.observer.complete()}this.unsubscribe()}}error(e){if(!this.isUnsubscribed){if(this.observer.error){this.observer.error(e)}this.unsubscribe()}}addTeardown(e){this.teardowns.push(e)}unsubscribe(){if(!this.isUnsubscribed){this.isUnsubscribed=true;if(this.controller){this.controller.abort()}this.teardowns.forEach(e=>{if(typeof e!=="function"){throw new Error("[Cami.js] Teardown must be a function. Please implement a teardown function in your subscriber.")}e()})}}};var m=class{constructor(e=()=>()=>{}){this._observers=[];this.subscribeCallback=e}subscribe(e=()=>{},r=()=>{},s=()=>{}){let n;if(typeof e==="function"){n={next:e,error:r,complete:s}}else if(typeof e==="object"){n=e}else{throw new Error("[Cami.js] First argument to subscribe must be a next callback or an observer object")}const i=new me(n);let o=()=>{};try{o=this.subscribeCallback(i)}catch(c){if(i.error){i.error(c)}else{console.error("[Cami.js] Error in Subscriber:",c)}return}i.addTeardown(o);this._observers.push(i);return{unsubscribe:()=>i.unsubscribe(),complete:()=>i.complete(),error:c=>i.error(c)}}onValue(e){return this.subscribe({next:e})}onError(e){return this.subscribe({error:e})}onEnd(e){return this.subscribe({complete:e})}[Symbol.asyncIterator](){let e;let r;let s=new Promise(n=>r=n);e={next:n=>{r({value:n,done:false});s=new Promise(i=>r=i)},complete:()=>{r({done:true})},error:n=>{throw n}};this.subscribe(e);return{next:()=>s}}};var Z=class extends m{constructor(e){super(r=>{this._subscriber=r;return()=>{this._subscriber=null}});this.state=e;this.reducers={};this.middlewares=[];this.devTools=this.connectToDevTools()}connectToDevTools(){if(typeof window!=="undefined"&&window["__REDUX_DEVTOOLS_EXTENSION__"]){const e=window["__REDUX_DEVTOOLS_EXTENSION__"].connect();e.init(this.state);return e}return null}use(e){this.middlewares.push(e)}register(e,r){if(this.reducers[e]){throw new Error(`Action type ${e} is already registered.`)}this.reducers[e]=r}dispatch(e,r){if(typeof e==="function"){return e(this.dispatch.bind(this),()=>this.state)}if(typeof e!=="string"){throw new Error(`Action type must be a string. Got: ${typeof e}`)}const s=this.reducers[e];if(!s){console.warn(`No reducer found for action ${e}`);return}const n={state:this.state,action:e,payload:r};for(const i of this.middlewares){i(n)}this.state=S(this.state,i=>{s(i,n.payload)});this._observers.forEach(i=>i.next(this.state));if(this.devTools){this.devTools.send(e,this.state)}}};var W=class extends m{constructor(e=null,r=null,{last:s=false}={}){super();if(s){this._lastObserver=r}else{this._observers.push(r)}this._value=S(e,n=>{});this._pendingUpdates=[];this._updateScheduled=false}get value(){if(B.isComputing!=null){B.isComputing.addDependency(this)}return this._value}set value(e){this.update(()=>e)}assign(e){if(typeof this._value!=="object"||this._value===null){throw new Error("[Cami.js] Observable value is not an object")}this.update(r=>Object.assign(r,e))}set(e,r){if(typeof this._value!=="object"||this._value===null){throw new Error("[Cami.js] Observable value is not an object")}this.update(s=>{s[e]=r})}delete(e){if(typeof this._value!=="object"||this._value===null){throw new Error("[Cami.js] Observable value is not an object")}this.update(r=>{delete r[e]})}clear(){this.update(()=>({}))}push(...e){if(!Array.isArray(this._value)){throw new Error("[Cami.js] Observable value is not an array")}this.update(r=>{r.push(...e)})}pop(){if(!Array.isArray(this._value)){throw new Error("[Cami.js] Observable value is not an array")}this.update(e=>{e.pop()})}shift(){if(!Array.isArray(this._value)){throw new Error("[Cami.js] Observable value is not an array")}this.update(e=>{e.shift()})}splice(e,r,...s){if(!Array.isArray(this._value)){throw new Error("[Cami.js] Observable value is not an array")}this.update(n=>{n.splice(e,r,...s)})}unshift(...e){if(!Array.isArray(this._value)){throw new Error("[Cami.js] Observable value is not an array")}this.update(r=>{r.unshift(...e)})}reverse(){if(!Array.isArray(this._value)){throw new Error("[Cami.js] Observable value is not an array")}this.update(e=>{e.reverse()})}sort(e){if(!Array.isArray(this._value)){throw new Error("[Cami.js] Observable value is not an array")}this.update(r=>{r.sort(e)})}fill(e,r=0,s=this._value.length){if(!Array.isArray(this._value)){throw new Error("[Cami.js] Observable value is not an array")}this.update(n=>{n.fill(e,r,s)})}copyWithin(e,r,s=this._value.length){if(!Array.isArray(this._value)){throw new Error("[Cami.js] Observable value is not an array")}this.update(n=>{n.copyWithin(e,r,s)})}update(e){this._pendingUpdates.push(e);if(!this._updateScheduled){this._updateScheduled=true;if(typeof window!=="undefined"){requestAnimationFrame(this._applyUpdates.bind(this))}else{Promise.resolve().then(this._applyUpdates.bind(this))}}}notifyObservers(){const e=[...this._observers,this._lastObserver];e.forEach(r=>{if(r&&typeof r==="function"){r(this._value)}else if(r&&r.next){r.next(this._value)}})}_applyUpdates(){let e=this._value;while(this._pendingUpdates.length>0){const r=this._pendingUpdates.shift();this._value=S(this._value,r)}if(e!==this._value){this.notifyObservers()}this._updateScheduled=false}};var B=class t extends W{constructor(e,r){super(null);this.computeFn=e;this.context=r;this.dependencies=new Set;this.children=new Set;this.subscriptions=new Map;this.compute()}get value(){t.isComputing=this;const e=this.computeFn.call(this.context);t.isComputing=null;return e}compute(){this.notifyChildren();this._value=this.computeFn.call(this.context);this.notifyObservers()}addDependency(e){if(!this.dependencies.has(e)){const r=e.onValue(()=>this.compute());this.dependencies.add(e);this.subscriptions.set(e,r);if(e instanceof t){e.addChild(this)}}}dispose(){this.notifyChildren();this.dependencies.forEach(e=>{const r=this.subscriptions.get(e);if(r){r.unsubscribe()}this.dependencies.delete(e);this.subscriptions.delete(e);if(e instanceof t){e.removeChild(this)}})}addChild(e){this.children.add(e)}removeChild(e){this.children.delete(e)}notifyChildren(){this.children.forEach(e=>{e.dispose()});this.children.clear()}};var Ke=function(t){return new B(t,this)};var Je=function(t){this._isWithinBatch=true;Promise.resolve().then(t).finally(()=>{this._isWithinBatch=false;this.react()})};var Ye=function(t){let e=()=>{};const r=()=>{e();e=t.call(this)||(()=>{})};this._effects.push({effectFn:r,cleanup:e})};var D=class t extends m{static from(e){if(e instanceof m){return new t(r=>{const s=e.subscribe({next:n=>r.next(n),error:n=>r.error(n),complete:()=>r.complete()});return()=>{if(!s.closed){s.unsubscribe()}}})}else if(e[Symbol.asyncIterator]){return new t(r=>{let s=false;(()=>we(this,null,function*(){try{try{for(var n=$e(e),i,o,c;i=!(o=yield n.next()).done;i=false){const a=o.value;if(s)return;r.next(a)}}catch(o){c=[o]}finally{try{i&&(o=n.return)&&(yield o.call(n))}finally{if(c)throw c[0]}}r.complete()}catch(a){r.error(a)}}))();return()=>{s=true}})}else if(e[Symbol.iterator]){return new t(r=>{try{for(const s of e){r.next(s)}r.complete()}catch(s){r.error(s)}return()=>{if(!subscription.closed){subscription.unsubscribe()}}})}else if(e instanceof Promise){return new t(r=>{e.then(s=>{r.next(s);r.complete()},s=>r.error(s));return()=>{}})}else{throw new TypeError("[Cami.js] ObservableStream.from requires an Observable, AsyncIterable, Iterable, or Promise")}}map(e){return new t(r=>{const s=this.subscribe({next:n=>r.next(e(n)),error:n=>r.error(n),complete:()=>r.complete()});return()=>s.unsubscribe()})}filter(e){return new t(r=>{const s=this.subscribe({next:n=>{if(e(n)){r.next(n)}},error:n=>r.error(n),complete:()=>r.complete()});return()=>s.unsubscribe()})}reduce(e,r){return new Promise((s,n)=>{let i=r;const o=this.subscribe({next:c=>{i=e(i,c)},error:c=>n(c),complete:()=>s(i)});return()=>o.unsubscribe()})}takeUntil(e){return new t(r=>{const s=this.subscribe({next:i=>r.next(i),error:i=>r.error(i),complete:()=>r.complete()});const n=e.subscribe({next:()=>{r.complete();s.unsubscribe();n.unsubscribe()},error:i=>r.error(i)});return()=>{s.unsubscribe();n.unsubscribe()}})}take(e){return new t(r=>{let s=0;const n=this.subscribe({next:i=>{if(s++<e){r.next(i)}else{r.complete();n.unsubscribe()}},error:i=>r.error(i),complete:()=>r.complete()});return()=>n.unsubscribe()})}drop(e){return new t(r=>{let s=0;const n=this.subscribe({next:i=>{if(s++>=e){r.next(i)}},error:i=>r.error(i),complete:()=>r.complete()});return()=>n.unsubscribe()})}flatMap(e){return new t(r=>{const s=new Set;const n=this.subscribe({next:i=>{const o=e(i);const c=o.subscribe({next:a=>r.next(a),error:a=>r.error(a),complete:()=>{s.delete(c);if(s.size===0){r.complete()}}});s.add(c)},error:i=>r.error(i),complete:()=>{if(s.size===0){r.complete()}}});return()=>{n.unsubscribe();s.forEach(i=>i.unsubscribe())}})}switchMap(e){return new t(r=>{let s=null;const n=this.subscribe({next:i=>{if(s){s.unsubscribe()}const o=e(i);s=o.subscribe({next:c=>r.next(c),error:c=>r.error(c),complete:()=>{if(s){s.unsubscribe();s=null}}})},error:i=>r.error(i),complete:()=>{if(s){s.unsubscribe()}r.complete()}});return()=>{n.unsubscribe();if(s){s.unsubscribe()}}})}toArray(){return new Promise((e,r)=>{const s=[];this.subscribe({next:n=>s.push(n),error:n=>r(n),complete:()=>e(s)})})}forEach(e){return new Promise((r,s)=>{this.subscribe({next:n=>e(n),error:n=>s(n),complete:()=>r()})})}every(e){return new Promise((r,s)=>{let n=true;this.subscribe({next:i=>{if(!e(i)){n=false;r(false)}},error:i=>s(i),complete:()=>r(n)})})}find(e){return new Promise((r,s)=>{const n=this.subscribe({next:i=>{if(e(i)){r(i);n.unsubscribe()}},error:i=>s(i),complete:()=>r(void 0)})})}some(e){return new Promise((r,s)=>{const n=this.subscribe({next:i=>{if(e(i)){r(true);n.unsubscribe()}},error:i=>s(i),complete:()=>r(false)})})}finally(e){return new t(r=>{const s=this.subscribe({next:n=>r.next(n),error:n=>{e();r.error(n)},complete:()=>{e();r.complete()}});return()=>{s.unsubscribe()}})}toState(e=null){const r=new ObservableState(e);this.onValue(s=>r.update(()=>s));return r}emit(e){this._observers.forEach(r=>r.next(e))}};var ye=class extends D{constructor(e){super();if(typeof e==="string"){this.element=document.querySelector(e);if(!this.element){throw new Error(`Element not found for selector: ${e}`)}}else if(e instanceof Element||e instanceof Document){this.element=e}else{throw new Error(`Invalid argument: ${e}`)}}on(e,r={}){return new D(s=>{const n=i=>{s.next(i)};this.element.addEventListener(e,n,r);return()=>{this.element.removeEventListener(e,n,r)}})}};var Ze=class extends HTMLElement{constructor(){super();this._unsubscribers=new Map;this.store=null;this._effects=[];this._isWithinBatch=false;this.computed=Ke.bind(this);this.batch=Je.bind(this);this.effect=Ye.bind(this)}observable(e){const r=new W(e,s=>this.react.bind(this)(),{last:true});return r}observableAttr(e,r=s=>s){let s=this.getAttribute(e);s=S(s,r);return this.observable(s)}setObservables(e){Object.keys(e).forEach(r=>{if(this[r]instanceof m){this[r].next(e[r])}})}subscribe(e,r){this.store=e;const s=this.observable(e.state[r]);const n=e.subscribe(i=>{this[r].update(()=>i[r])});this._unsubscribers.set(r,n);return s}dispatch(e,r){this.store.dispatch(e,r)}connectedCallback(){this.react()}disconnectedCallback(){this._unsubscribers.forEach(e=>e());this._effects.forEach(({cleanup:e})=>e&&e())}react(){if(!this._isWithinBatch){const e=this.template();Fe(e,this);this._effects.forEach(({effectFn:r})=>r.call(this))}}template(){throw new Error("[Cami.js] You have to implement the method template()!")}};function Gt(t,e){if(!customElements.get(t)){customElements.define(t,e)}}function Kt(t){return new Z(t)}export{m as Observable,ye as ObservableElement,W as ObservableState,Z as ObservableStore,D as ObservableStream,Ze as ReactiveElement,Gt as define,nt as html,Kt as store};
/**
 * @license
 * Copyright (c) 2023 Kenn Costales
 * MIT License
 */
/*! Bundled license information:

lit-html/lit-html.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
*/
//# sourceMappingURL=cami.module.js.map
